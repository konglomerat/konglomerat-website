{namespace neos=Neos\Neos\ViewHelpers}
{namespace media=Neos\Media\ViewHelpers}

<f:section name="image">
	<f:if condition="{link}">
		<f:then>
			<a
				style="background-image: url('{media:uri.image(image: image, maximumWidth: 200, maximumHeight: 200)}');"
				class="section-icon {f:if(condition: '{rounded}', then: 'section-icon--rounded')}"
				href="{neos:uri.node(node: link)}"
			>
			</a>
		</f:then>
		<f:else>
			<div
				style="background-image: url('{media:uri.image(image: image, maximumWidth: 200, maximumHeight: 200)}');"
				class="section-icon {f:if(condition: '{rounded}', then: 'section-icon--rounded')}"
			>
			</div>
		</f:else>
	</f:if>
</f:section>

<div class="section" data-row="{row}" data-column="{column}">
	<div class="section__content growing-comb">
		<div class="section__icon">
			<f:if condition="{image}">
				<f:then>
					<f:render section="image" arguments="{_all}" />
				</f:then>
			</f:if>
		</div>
		<f:render partial="CombSpike"/>
		<div class="growing-comb__middle">
			<div class="growing-comb__content">
				{main -> f:format.raw()}
			</div>
		</div>
		<f:render partial="CombSpike" arguments="{bottom: true}"/>
	</div>
</div>